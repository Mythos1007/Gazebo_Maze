# Gazebo 미로 생성 프로그램

Gazebo 시뮬레이터에서 사용할 수 있는 랜덤 미로를 생성하는 Python 프로그램입니다.

## 주요 특징

- ✅ **연결성 보장**: DFS(깊이 우선 탐색) 알고리즘으로 모든 영역이 연결되어 막힌 길이 없음
- ✅ **중앙 기준 좌표**: 0,0 좌표를 중심으로 미로 생성
- ✅ **커스터마이징 가능**: 미로 크기, 셀 크기, 최소 벽 개수 조절 가능
- ✅ **외곽 테두리 고정**: 미로의 외곽은 항상 벽으로 둘러싸임
- ✅ **재현 가능**: 랜덤 시드를 사용하여 동일한 미로 재생성 가능

## 설치 및 실행

### 실행 권한 부여
```bash
chmod +x make_maze.py
```

### 기본 사용법
```bash
# 기본 설정으로 5x5 미로 생성
python3 make_maze.py

# Gazebo에서 실행
gazebo maze.sdf
```

## 사용 옵션

```bash
python3 make_maze.py [옵션]

옵션:
  -h, --help            도움말 표시
  -s SIZE, --size SIZE  미로 그리드 크기 (기본값: 5)
                        예: -s 7 → 7x7 미로

  -c CELL_SIZE, --cell-size CELL_SIZE
                        각 셀의 크기 (미터, 기본값: 1.0)
                        예: -c 1.5 → 각 셀이 1.5m x 1.5m

  -m MIN_WALLS, --min-walls MIN_WALLS
                        최소 내부 벽 개수 (기본값: 5)
                        예: -m 10 → 최소 10개의 내부 벽

  -o OUTPUT, --output OUTPUT
                        출력 파일 이름 (기본값: maze.sdf)
                        예: -o my_maze.sdf

  --seed SEED           랜덤 시드 (재현 가능한 미로 생성)
                        예: --seed 42 → 항상 같은 미로 생성
```

## 사용 예제

### 예제 1: 기본 미로 생성
```bash
python3 make_maze.py
```
- 5x5 그리드
- 각 셀 1.0m x 1.0m
- 총 크기: 5.0m x 5.0m
- 최소 내부 벽: 5개

### 예제 2: 대형 미로 생성
```bash
python3 make_maze.py -s 10 -m 20 -o large_maze.sdf
```
- 10x10 그리드
- 총 크기: 10.0m x 10.0m
- 최소 내부 벽: 20개

### 예제 3: 작은 셀 크기의 미로
```bash
python3 make_maze.py -s 7 -c 0.5 -o small_cell_maze.sdf
```
- 7x7 그리드
- 각 셀 0.5m x 0.5m
- 총 크기: 3.5m x 3.5m

### 예제 4: 재현 가능한 미로
```bash
python3 make_maze.py --seed 12345 -o reproducible_maze.sdf
```
- 동일한 시드로 항상 같은 미로 생성

### 예제 5: 복잡한 대형 미로
```bash
python3 make_maze.py -s 15 -c 1.2 -m 50 -o complex_maze.sdf
```
- 15x15 그리드
- 각 셀 1.2m x 1.2m
- 총 크기: 18.0m x 18.0m
- 최소 내부 벽: 50개

## 미로 구조

### 좌표 시스템
- 중심점: (0, 0, 0)
- X축: 좌(-) → 우(+)
- Y축: 하(-) → 상(+)
- Z축: 바닥(0) → 위(+)

### 벽 규격
- 높이: 0.5m
- 두께: 0.05m (5cm)
- 길이: 셀 크기와 동일
- 색상: 회색 (RGB: 0.7, 0.7, 0.7)

## 알고리즘 설명

### DFS 미로 생성
1. 모든 셀 사이에 벽을 배치 (초기 상태)
2. 랜덤한 시작 위치 선택
3. DFS로 경로를 깎아내며 미로 생성
4. 모든 셀이 최소 한 번은 방문되도록 보장

### 연결성 검증
- BFS(너비 우선 탐색)로 모든 셀의 연결성 확인
- 추가 벽을 배치할 때 연결성이 깨지지 않도록 검증
- 막힌 길이 없음을 보장

## Gazebo에서 사용하기

### 미로 실행
```bash
gazebo maze.sdf
```

### ROS2와 함께 사용
```bash
# launch 파일에서 미로 월드 로드
ros2 launch your_package your_launch.py world:=/path/to/maze.sdf
```

## 출력 예시

```
=== 미로 생성 시작 ===
그리드 크기: 5x5
셀 크기: 1.0m
최소 내부 벽: 5개
출력 파일: maze.sdf

DFS 생성 후 내부 벽 개수: 16

미로가 'maze.sdf' 파일로 생성되었습니다.
총 벽 개수: 36
  - 외곽 벽: 20개
  - 내부 벽: 16개
미로 크기: 5x5 (5.0m x 5.0m)
모든 영역이 연결되어 있습니다. ✓

=== 미로 생성 완료 ===

Gazebo에서 실행하려면:
  gazebo maze.sdf
```

## 주의사항

1. **최소 벽 개수**: DFS로 생성된 미로보다 많은 벽을 요구하면, 연결성을 유지하는 범위 내에서만 추가됩니다.
2. **그리드 크기**: 너무 큰 그리드(예: 50x50 이상)는 파일 크기가 커지고 Gazebo 로딩 시간이 길어질 수 있습니다.
3. **셀 크기**: 로봇의 크기를 고려하여 적절한 셀 크기를 선택하세요. (권장: 0.5m ~ 2.0m)

## 파일 구조

```
make_maze.py          # 미로 생성 프로그램
maze.sdf             # 생성된 미로 파일 (기본값)
README_MAZE.md       # 이 문서
```

## 라이선스

이 프로그램은 자유롭게 사용, 수정, 배포할 수 있습니다.
